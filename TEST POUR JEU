import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;


public class ServeurMT extends Thread {
	String hostName = "127.0.0.1";
	int nbJoueurs; 
	private boolean fin;
	private String gagnant;
	private List<Socket> joueursConnectes=new ArrayList<>();
	
	
	public void run() {
		try {
			ServerSocket ss = new ServerSocket(2345);
			System.out.println("Serveur ecoute");
			while(true) {
				Socket s1=ss.accept();
				Socket s2=ss.accept();
				joueursConnectes.add(s1);
				nbJoueurs++;
				joueursConnectes.add(s2);
				nbJoueurs++;
				new Conversation(s1,s2).start();
			}
		}catch (IOException e) {
			e.printStackTrace();
		}
	}//a chaque joueur en plus, le num du joueur connecté augmente 
	
	class Conversation extends Thread{
		private Socket socket1;
		private Socket socket2;
		public Conversation(Socket socket1,Socket socket2){
			super();
			this.socket1=socket1;
			this.socket2=socket2;
		} 
		
		public void run() {
			//code de la conv
			try {
				BufferedReader plec1 = new BufferedReader(new InputStreamReader(socket1.getInputStream()));
				PrintWriter pred1 = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket1.getOutputStream())),true);
				BufferedReader plec2 = new BufferedReader(new InputStreamReader(socket2.getInputStream()));
				PrintWriter pred2 = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket2.getOutputStream())),true);
				
				
				String IP1 = socket1.getRemoteSocketAddress().toString();
				String IP2 = socket2.getRemoteSocketAddress().toString();
				
				String newline=System.getProperty("line.separator");
				
				System.out.println("Connexion du client numéro 1 IP= "+IP1);
				System.out.println("Connexion du client numéro 2 IP= "+IP2);
				pred1.println("Bienvenue,vous êtes le joueur numéro 1! Nous allons vous donnez un mot but que vous devrez faire deviner au joueur 2 avec des phrases le décrivant d'une longueur max de 50 caractères. 30% des caractères seront automatiquement effacé ainsi que tous les synonymes de ce mot.");
				pred2.println("Bienvenue,vous êtes le joueur numéro 2! Vous devrez deviner le mot but décrit par le joueur 1. Vous pouvez écrire des phrases de 50 caractère au max. Si la phrase contient le mot but vous avez gagné.");
				
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
	}
	public static void main (String[] args) {
		new ServeurMT().start();
	}

}
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

public class Joueur1 {
static final int port = 2345 ;
	
	public static void main(String[] args) throws Exception{
		Socket socket1 = new Socket ("127.0.0.1", port);
		System.out.println("SOCKET+" + socket1);
		System.out.println("entrer 1 pour jouer");
		
		BufferedReader plec = new BufferedReader( new InputStreamReader(socket1.getInputStream()));
		
		PrintWriter pred = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket1.getOutputStream())),
				true);
		
	    
		Scanner scan = new Scanner (System.in);
		for (int i =0; i<10; i++) {
			String s=scan.nextLine();
			pred.println(s);
			String str = plec.readLine();
			System.out.println("Joueur1 recoit:" +str);
		
		}
		
		System.out.println("Fin Joueur1");
		pred.println("END");
		plec.close();
		pred.close();
		socket1.close();
	}
}
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

public class Joueur2 {
static final int port = 2345 ;
	
	public static void main(String[] args) throws Exception{
		Socket socket2 = new Socket ("127.0.0.1", port);
		System.out.println("SOCKET+" + socket2);
		System.out.println("entrer 1 pour jouer");
		
		BufferedReader plec = new BufferedReader( new InputStreamReader(socket2.getInputStream()));
		
		PrintWriter pred = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket2.getOutputStream())),
				true);
		
		Scanner scan = new Scanner (System.in);
		for (int i =0; i<10; i++) {
			String s=scan.nextLine();
			pred.println(s);
			String str = plec.readLine();
			System.out.println("Joueur2 recoit:" +str);
		}
		
		System.out.println("Fin Joueur1");
		pred.println("END");
		plec.close();
		pred.close();
		socket2.close();
}

}
